(this.webpackJsonpstreaming=this.webpackJsonpstreaming||[]).push([[0],{122:function(e,n){},129:function(e,n){},131:function(e,n){},87:function(e,n,t){"use strict";t.r(n);var r=t(11),c=t(55),s=t(6),i=t(4),o=t(5),a=t(7),u=t(8),d=t(26),j=t(13),l=t(15),b=t(3),f=t.n(b),O=t(47),h=t.n(O),v=t(20),g=t(27),m=t(80),x=t.n(m);function p(){var e=Object(d.a)(["\n  width: 100%;\n"]);return p=function(){return e},e}function w(){var e=Object(d.a)(["\n  object-fit: contain;\n"]);return w=function(){return e},e}function y(){var e=Object(d.a)(["\n  flex: 1 1 0;\n  margin: 1% 1% 1% 1%;\n  width: 100px;\n"]);return y=function(){return e},e}function k(){var e=Object(d.a)(["\n  display: flex;\n  justify-content: space-evenly;\n  flex-wrap: wrap;\n  flex-direction: column;\n"]);return k=function(){return e},e}function S(){var e=Object(d.a)(["\n  flex: 1 1 50%;\n\n"]);return S=function(){return e},e}function _(){var e=Object(d.a)(["\n  width: 100%;\n  justify-content: space-evenly;\n"]);return _=function(){return e},e}var R="https://api.simplewebrtc.com/config/guest/".concat("716625839d6dd087acb04de6"),C=v.j(),M=g.a.div(_()),U=g.a.div(S()),N=g.a.div(k()),E=g.a.div(y()),I=Object(g.a)(v.i)(w()),Y=g.a.video(p()),A=function(e){Object(a.a)(t,e);var n=Object(u.a)(t);function t(){return Object(i.a)(this,t),n.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return this.props.peers.map((function(e){return console.log(e),Object(j.jsx)(v.f,{peer:e.address,render:function(n){var t=n.media.filter((function(e){return"video"===e.kind&&!e.remoteDisabled}));return t.length>0?Object(j.jsx)(E,{children:Object(j.jsx)(I,{media:t[0]})},e.id):Object(j.jsx)("h1",{children:"Can't find video for peer"})}})}))}}]),t}(f.a.Component);var B=function(e){var n=function(e){var n=f.a.useState([]),t=Object(s.a)(n,2),i=t[0],o=t[1],a=f.a.useRef();return f.a.useEffect((function(){return a.current=x()("http://localhost:4000",{}),a.current.on("new_message",(function(e){var n;console.log("Got new message");var t=Object(c.a)(Object(c.a)({},e),{},{ownedByCurrentUser:e.username===(null===(n=a.current)||void 0===n?void 0:n.id)});o((function(e){return[].concat(Object(r.a)(e),[t])}))})),function(){var e;null===(e=a.current)||void 0===e||e.disconnect()}}),[e]),{messages:i,sendMessage:function(e){var n;console.log("Sending message"),console.log(a),null===(n=a.current)||void 0===n||n.emit("new_message",{message:e,senderId:a.current.id})}}}("roomId"),t=n.messages,i=n.sendMessage,o=f.a.useState(""),a=Object(s.a)(o,2),u=a[0],d=a[1];console.log(t);return Object(j.jsxs)("div",{children:[Object(j.jsxs)("section",{id:"chatroom",children:[Object(j.jsx)("section",{id:"feedback"}),Object(j.jsx)("h2",{children:"Messages"}),Object(j.jsx)("ul",{className:"messages-list",children:t.map((function(e,n){return Object(j.jsx)("li",{children:e.message},n)}))})]}),Object(j.jsxs)("section",{id:"input_zone",children:[Object(j.jsx)("input",{id:"message",className:"vertical-align",type:"text",onChange:function(e){d(e.target.value)}}),Object(j.jsx)("button",{id:"send_message",className:"vertical-align",type:"button",onClick:function(){i(u),d("")},children:"Send"})]})]})};h.a.render(Object(j.jsx)(l.a,{store:C,children:Object(j.jsxs)(M,{children:[Object(j.jsxs)(U,{children:[Object(j.jsx)("h1",{children:"The lecture video will go here"}),Object(j.jsx)(Y,{src:function(){var e=window.location.search;console.log(e);var n=new URLSearchParams(e).get("s3link");return null==n?"":n}(),controls:!0,children:"Your browser does not support the video tag."}),Object(j.jsx)(B,{})]}),Object(j.jsx)(N,{children:Object(j.jsxs)(v.d,{configUrl:R,children:[Object(j.jsx)(v.b,{children:Object(j.jsx)("h1",{children:"Connecting..."})}),Object(j.jsxs)(v.a,{children:[Object(j.jsx)(v.g,{audio:!0,video:!0,auto:!0}),Object(j.jsx)(v.e,{}),Object(j.jsx)(v.h,{name:"YOUR_ROOM_NAME",password:"YOUR_ROOM_PASSWORD",children:function(e){var n=e.peers;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(v.c,{shared:!0,render:function(e){var n=e.media.filter((function(e){return"video"===e.kind}));return n.length>0?Object(j.jsx)(E,{children:n.map((function(e){return Object(j.jsx)(I,{media:e},e.id)}))}):Object(j.jsx)("h1",{children:"No Stream For Local User - is your webcam on?"})}}),Object(j.jsx)(A,{peers:n})]})}})]})]})})]})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.147a851b.chunk.js.map